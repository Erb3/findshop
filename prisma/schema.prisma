generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model Shop {
  id               String   @id @default(auto()) @map("_id") @db.ObjectId
  name             String
  description      String?
  owner            String
  computerID       Int
  multiShop        Boolean
  softwareName     String?
  softwareVersions String?
  lastSeen         DateTime @default(now())
  mainLocation     Location @relation(fields: [mainLocationId], references: [id])
  mainLocationId   String   @unique @db.ObjectId
  items            Item[]
}

model Location {
  id          String    @id @default(auto()) @map("_id") @db.ObjectId
  x           Int
  y           Int
  z           Int
  description String?
  dimension   Dimension
  shop        Shop?
}

model Item {
  id                  String   @id @default(auto()) @map("_id") @db.ObjectId
  itemId              String
  price               Float
  currency            Currency @default(KST)
  displayName         String
  dynamicPrice        Boolean  @default(false)
  madeOnDemand        Boolean  @default(false)
  stock               Int?
  requiresInteraction Boolean  @default(false)
  isBuyingItem        Boolean  @default(false)
  noLimit             Boolean  @default(false)
  shop                Shop     @relation(fields: [shopId], references: [id])
  shopId              String   @db.ObjectId
}

enum Dimension {
  OVERWORLD
  NETHER
  END
}

enum Currency {
  KST
  TST
}
